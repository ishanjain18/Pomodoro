{% extends "layout.html" %}

{% block title %}
    : The Office
{% endblock %}

{% block main %}
  <section class="bigbrain">
    <div>
      Add a new Task:
        <form action="/add" method="post">
          <input name="task" type="text" placeholder="Enter a Task">
          <button type="submit">Add Task</button>
        </form>
    </div>
    <br>
  <h2>TASKS</h2>
      <br>
      <div>
          <form action="/remove" method="post">
            <table class="table table-hover table-primary">
              <tr></tr>
                <th>:)</th>
                <th>Task</th>
                <th>Pomodoro</th>
                <th>Timer</th>

              </tr>
            {% for index, task in tasks %}
                <tr>
                  <td><input type="checkbox" name="check{{index}}"></td>
                  <td><span name="removed{{index}}">{{ task }}</span></td>
                  <td><button type="button" name="pomostart{{index}}" onclick="timeractivate{{index}}()">Start Pomodoro</td>
                  <td><p id="timer{{index}}">--</p></td>
                </tr>
            {% endfor %}
           </table>

{% for i in range(0, count) %}
                  <script>


                        function timeractivate{{i}}(){
                            var d = new Date();
                            var countDownDate = d.getTime() + 1500000;


                          // Update the count down every 1 second
                            var x = setInterval(function() {

                            // Get today's date and time
                            var now = new Date().getTime();


                            // Find the distance between now and the count down date
                            var distance = countDownDate - now;


                            // Time calculations for days, hours, minutes and seconds

                            var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                            var seconds = Math.floor((distance % (1000 * 60)) / 1000);

                            // Output the result in an element with id="timer"
                            document.getElementById("timer{{i}}").innerHTML = minutes + "m " + seconds + "s ";

                            // If the count down is over, write some text
                            if (distance < 0) {
                              clearInterval(x);
                              document.getElementById("timer{{i}}").innerHTML = "COMPLETED";
                            }
                          }, 1000);
                        }

                </script>
{% endfor %}

          <button type="submit">Remove</button>
          </form>
      <br><br><br>

      </div>
  </section>


{% endblock %}